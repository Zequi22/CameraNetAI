<!DOCTYPE html>
<!-- DeclaraciÃ³n del tipo de documento HTML5 -->
<html lang="es">
<!-- Inicio del documento HTML con el idioma configurado a espaÃ±ol -->
<head>
    <!-- Contenido del encabezado del documento -->
    <meta charset="UTF-8">
    <!-- ConfiguraciÃ³n de la codificaciÃ³n de caracteres a UTF-8 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- ConfiguraciÃ³n para que el diseÃ±o sea responsivo en dispositivos mÃ³viles -->
    <title>Â¿QuÃ© es esto?</title>
    <!-- TÃ­tulo del documento que aparece en la pestaÃ±a del navegador -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <!-- InclusiÃ³n de la biblioteca TensorFlow.js desde un CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet"></script>
    <!-- InclusiÃ³n del modelo MobileNet de TensorFlow.js desde un CDN -->
    <link rel="stylesheet" href="/style.css">
    <!-- Enlace al archivo CSS externo -->
</head>
<body>
    <!-- Inicio del cuerpo del documento -->
    <h1>Â¿QuÃ© ves? ðŸ‘€</h1>
    <!-- TÃ­tulo principal con un emoji divertido -->
    <video id="video" width="640" height="480" autoplay playsinline></video>
    <!-- Contenedor de video -->
    <div id="result">Cargando... Â¡PrepÃ¡rate para la magia! âœ¨</div>
    <!-- Contenedor para mostrar los resultados con un mensaje inicial -->

    <script>
        // Acceso a la cÃ¡mara trasera del mÃ³vil del usuario
        const video = document.getElementById('video');
        const resultDiv = document.getElementById('result');

        navigator.mediaDevices.getUserMedia({ video: { facingMode: { exact: "environment" } } })
            .then(stream => {
                video.srcObject = stream;
            })
            .catch(error => {
                console.error('Error al acceder a la cÃ¡mara trasera:', error);
                resultDiv.innerText = 'Â¡Ups! No puedo acceder a la cÃ¡mara. ðŸ˜ž';
            });

        // Cargar el modelo MobileNet a travÃ©s de TensorFlow.js
        let model;
        tf.loadLayersModel('https://tfhub.dev/google/tfjs-model/mobilenet_v2_1.0_224/classification/3/default/1').then(mobilenetModel => {
            model = mobilenetModel;
            console.log('Modelo MobileNet cargado');
            resultDiv.innerText = 'Â¡Listo! A ver quÃ© ves... ðŸ¤©';
        });

        // Clasificar el video cada 1 segundo
        video.addEventListener('loadeddata', () => {
            setInterval(async () => {
                if (model) {
                    const predictions = await model.classify(video);
                    resultDiv.innerText = predictions.map(p => `${p.className}: ${p.probability.toFixed(2)}`).join('\n') || 'No estoy seguro... ðŸ¤”';
                }
            }, 1000);
        });
    </script>
</body>
</html>
<!-- Fin del documento HTML -->
